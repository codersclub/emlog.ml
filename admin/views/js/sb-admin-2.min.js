/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(function(){

    var sd_tog;   
    var menu_id = ['#menu_content','#menu_sys','#menu_view','#menu_ext']; //The id names of all secondary menus that need to be operated
     
    if($(window).width() < 768){ //Check for a small screen
        for(let i = 0; i < menu_id.length; i++){
            if($(menu_id[i]).hasClass("show")){
                $(menu_id[i]).addClass("sd_menu_hd");
            }
        }
        $(".sidebar").toggleClass("sd-hidden");
    }else{
        var wrapper_height = $(".navbar-nav").outerHeight();
        $("#content-wrapper").css("min-height",wrapper_height+"px");

        setInterval(function(){  // When the menu height exceeds the browser height, add a scroll bar
            if($('#accordionSidebar').outerHeight() > $(window).height()){
                $('#accordionSidebar').css('height','100vh').css('overflow-x','hidden');
            }
        },300);
    }
    sd_tog = false;  
    $("#menu_category_content").click(function(){ //Click the button to open the sidebar
        if($(window).width() < 768){
            for(let i = 0; i < menu_id.length; i++){
                if($(menu_id[i]).hasClass("sd_menu_hd")){
                    $(menu_id[i]).removeClass("sd_menu_hd");
                }
            }
        }      
    });
    $("#sidebarToggleTop").click(function(){     //Click the sidebar button submenu button
        var content_height = $("#content-wrapper").outerHeight();
        $(".sidebar").css("min-height",content_height+"px");
        if(!sd_tog){  //Expand menu
            $("#content-wrapper").animate({left:'96px'},"normal","swing",
                function(){
                    $.each(menu_id,function(key, value){
                        if($(value).hasClass("sd_menu_hd")){
                            $(value).removeClass("sd_menu_hd");
                            $(".sidebar .collapse").collapse("hide");
                        }
                    });
                });
            sd_tog = true;
        }else{  //Close menu
            $.each(menu_id,function(key, value){
                if($(value).hasClass("sd_menu_hd")==false){
                    $(value).addClass("sd_menu_hd");
                }
            });
            $("#content-wrapper").animate({left:'0px'},"normal","swing");
            sd_tog = false; 
        }
    });
  });
  
